name = "No array_merge() In Loops";
description = "The function array_merge() is memory intensive : every call will duplicate the arguments in memory, before merging them. 

Since arrays way be quite big, it is recommended to avoid using merge in a loop. Instead, one should use array_merge() with as many arguments as possible, making the merge a on time call.

<?php

// Wrong : very memory intensive
$all = array();
foreach($source as $element) {
    $all = array_merge($all, $element);
}

// Good : Only one array_merge call
$a = array();
foreach($source as $element) {
    $a[] = $element;
}
$all = call_user_func_array('array_merge',$a);

// Also identical : 
$all = call_user_func('array_merge', ...$a);

// In the very concise example above, you may even avoid the foreach totally 
// Though, in real life, the foreach is often needed for processing elements before merging
$all = call_user_func('array_merge', ...$source);

?>

Note that array_merge_recursive() is also affected.
";
clearphp = "no-array_merge-in-loop";
