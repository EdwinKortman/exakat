Support updates in VCS (just change those files, not reload all the application, serve évolutions, not status)

Make analyzer concurrent proof (Stop running several projects, but accept several analyzes)

Make loader run simultaneous scripts 

Make tokenizer with 2 stages : low stage, with simple expressions, and upper stage, with more complexe structures.
Find a way to reduce the number of stored objects and link in the loader
Note stats at each stage of the processing for later analitical review
Log information about speed of process (tokens, files, etc).

Export progress/ETA in processing (tokenizer, analyzer...)

Prepare documentation

Cooccurences : structures that are next to each other in sequences.

Analyzers
+ Make a list of files and extensions in Files task

Update variables with the above code
Make report configurable (configuration of the actual analyzers to be run), and automatically build.

Change Class to support options like we do for functions

Reconcile String with some detectors : list of country, SQL code, JS code, CSS code, HTML code, regex, HTTP headers, etc. 
Detect databases : large arrays of values. 

Inventory of keys in arrays, by array

Variables that are looking like : $var1 and $varl, $var0 and $varO, $var and $vars, vars with a switch in the letters only

Variable that bear special names (PHP variables, other library variables, global, Formating, spelling).

Reintroduce the php -l tests in the loader : add a cache to avoir re-test ? 

Scope change between a method and the one in the parent classes.

Variables : 
Camel case, underscore separated, Spelling, $[type]Name ($sString, $iId,), variables with numbers or sharing prefixes).

Export analyze to Sqlite for stats

Add a deamon to project, that scans then start
Build a test project for the reports styles (avoid md/pdf pb)

Add exemples from the found code to the explanations. 
Make a summary to the report (how to share this ? When to involve the author ? Needs a special intermediate report ? )
Check spelling in variables/classe names : 
  Spin this as an external project

Namespace inventory as a tree.
Mention file extensions/list used for testing in audit information

Spot useless extension (and suggest removing them). : how to know which extensions ? WOrk on default PHP conf. 
Faire la liste des extensions standards de PHP (et donc, celles non standards)

Create a quick analysis, for one file only (exclude some application wide analysis).
Mark analyzers as file or application wide analyzer. 

Spot classes with too many constants (they cost memory)

Spot overwritten class constants.
Suspect implicit conversion
Check for unqualified names of classes : they shouldn't be too generic.
List Nsnames aliases and overlap

Make the php script idempotent (can be run again and finish the job, leave a note where it left...)
Spot function that are defined with php-function names (also spot overwriting).
Faire un dashboard avec les indicateurs du projet lui-même : manquent de tests, manques de traductions / documentations.

Aliases : Classes that extends others, but do no overloading; 

functions that returns one call of other function

Constant functions or structures (always return the same...)

Check __set_state : if there is a new in the parent, and the set state isn't overloaded, the final object is not of expected type.

For UnicodeBlock, merge the blocks into languages 

List errors of visibility between classes 
Detect strings that are used as an Array (then, spot the index, and check for the strings in those indexes)

Prepare nodes to be added to new network (function calls, variable track...)

Spot variable used in definitions

Update dashboard with number of analyzer and inventory or appinfo
Test treemap to export from bin/file
bin/file should also sort PHP files/directories by type : see fb treemap : code, scripts, media, tests, config. ...

produce a dot graph of classes
produce a dot graph of exceptions

paraleliser les analyzers

Spot the exceptions and the one that are thrown, and the one caught. 
spot use with no compound name and no namespace. They are ignored.
Spot try {} that are stopped below by another try.

add support for phar (will search inside the phar for scripts)
lighten the FILE link in the database (not the size of the produced CSV ).
Check that Namespaces (specially Global) cannot be there several times.
You should not throw an extension exception yourself (PDO)

// display the actual hierarchy in a complex logical expression (add parenthesis?)

Complex logical expression, without ().
Commented Code
First support comments in exakat

Spot identical files and avoir double analyse (.... ?)
Spot useless namespaces (namespace x; no function/classs/interface/constant)

upgrade regex search with result from thinkphp
Spot URL in strings
Spot SQL in strings
Improve regex for PCRE

Mark Nsname that are constants as such 

print_r(xxx, true) is not a pb.

Support phar files (digg them and find the local php files).

Add time of processing in the ReportInfo

Create a dummy project for fast testing of installation

spot #! lines and mark the file as executable commandline

List empty scripts, just like incompilables
Make a diagramm of the differents layers of the software

CHeck that Classes and file have the same names.

Calculate a ratio of whitespace / comment / code
Make stats on the type of comment (//, /*, # )

Make a dummy project to check all the analyzers in the same time (find a way to report which are tested or not automatically. May be comments ? )
Make an export to JSON format for testing purpose.

Must call parent constructor (destructor ? )
Must have desctructor's classes (when ? Closing resources are needed ? Like what ? )
in regex, several successive call will fill the same $r, and if not tested, it may lead to believe there are some results
function whose return may be ignored

Check how index degrades with size (compare with the previous).

Create a checker for the Format (they need a number of classes, and dependences).
Record all scripts's running time. 

Check file names for special chars ($ or 把).

analyzer names are sensitive to case. Make sure this is not a problem.
Faire un Content avec des métrics (Nombre d'arguments, longueur de line, nombre de constants... etc...)

Export class hierarchy, UML documents, etc.
Summary of traits's methods overlap (local to class, trait, inherited class). 
Traits of Traits
silently resolved conflicts in traits (overlapping local/trait/class)

share standard with different chapters (files, sockets, uploaded_file, etc....)

Functions that return always the same value, no matter what 
Constant structures (with only literals, so the whole is not changing anytime)

Make a report for the classes that tells what methods are actually used (their origin, base on static/self, etc…), with an indicator for the level of complexity.

Functions without returns and not interacting elsewhere (ini_set changes system), and not Methods.

Manage non-fatal error during lint phase (list the files that are showing some STRICT errors as a bulk). 

Faire un rapport général type PHPLOC, mentionner la quantité de valeur littéral dans le code. Faire une bande avec tous les fichiers les uns après les autres (ordonné?) et assigner une couleur à chaque type de notions (structure, littéral, opérateur, variable)

Signaler la consommation de mémoire à la compilation : aka, les constants sont toutes chargées dès le début, si elles sont trop nombreuses, c'est pas bon. Calculer cet embonpoint. 
Calculer les dépendances de chaque classes (dépendance obligatoire, dépendance conditionnelle, coût total).

Inventory of transport (list from PHP code)
UseVoidReturn : function return void/null, but result it captured (may be not used...)

report 'true' (wrongly compared boolean)
Die without no argument (at least, put __METHOD__, file)

inventory of registered functions (session, finalize, error...)
Characterize function as library (not global code), or script
Detect long switch, if elseif...

global versus $GLOBALS
Overwritten methods / constante 
Command Query Separation : Functions should either do something or answer something. That’s practical and clear advice.
Avoid output arguments (&$arguments, that will be modified...)
Have No Side Effects : effect on something else

Identify the Unit tests, based on the library : simpletest, Atoum, Phpunit, phpt ? 
SQL Should use binded parameters, not concatenation in string

Cyclic dependancies between traits
Modified arguments (bad idea! )
Used twice variable (set then given... Nothing between ? )
        if ( ($counts = $r->check()) || in_array($name , array("FunctioncallArray", 'Sequence'))) { $count is ambiguous
Identify complex logical expressions (in If, while, case....) with mathd, logical and AND
Identify date() formats (and sprintf too)

Map/Reduce : Faire marcher les analyses du tokenizer sur des intervalles dans les index 

Expressions that should be on the same line (@ unlink, ! )
! may have pb like @ (2 on one line)
Spot configuration that are not well used (ini_set('others', 3) => useless....)
Spot very deep code (lots of {{{{{{{}}}}}}}

Heavily used class/interface/etc.
Spot external libraries
Ignore the lib folder
Code source that mix defintiions (class, interface, const...) and actual code (except for protection against direct access..).

Add an analyzer of the application : As documentation, version, tests, external libs, languges, template, config.... Report this, and exclude some of the elements in the code.

Spot expressions that are the same (cf str_replace ...)
Spot files that use $this, and that are actually included in PHP methods (old style PHP inclusion, templating system (linked to include))
Suggest using ... instead of func_get_args, and ... instead of call_user_func_array

Spot use clause that are in the same namespace (just alias ? )

what happens when there are 100 arguments available for isRead and isModified ? (what happens when there is more than that? )
WrongCase : also apply to Use instruction
Check for use instruction for StaticProperty...
signaler l'habitude avec use (Un use? )

SIgnaler les use qui ne sont pas en haut du namespace)
signaler les pb de casse avec les alias
casting with long names (boolean, integer) instead of short ones (int, bool)

Lister les dépendances d'une classe (liste des autres classe, des fonctions, etc..)
scripts with warning (but no fatal) are excluded while they should be in.
Tag files if they are definition only, global script, or mixed. Remove some of the normal code.
SPot shadowed static members (name name, )
Spot change in PPP for members/functions
spot uses which original is used, but not the alias

Upgrade the 'randomtest' for PHPunit, with a sqlite table that track the number of test done, and randomize the oldest ones and the failed ones first.

Ternary that doesn't yield the same kind of results (print/ 1)

Identify the use of static and self and mention there is a difference in usage. 
make stats of usage of parent, self, static. 
Classes that are not found are classified as wrong case for calling (bug)

scripter la liste des extensions sur pecl.php.net
suggest Use and aliases to reduce code size.
combine several uses in one (prefix instead of classes)
understand the strategy of use.

Classes/UnusedPrivateProperties : Not done on alpharpc ?? No tokenizer.final report...
Several instruction in the same line : compare line with > not ==, so as to has f( \n g($x)) spotted.

Add a way to ignore some vendors dependings on project.
Add a way to overwrite / add / nullify some data from within a project.

Suggest properties to be ppp depending on usage (public => outusage, properted => child/parents, private : local class)

Suggest closures instead of functions if the function is used once. 
Suggest replacement for str_replace/ereg/preg/strtr

Conditional declarations ?

Heavily used classes/functions...

Using empty() with Function Calls and Expressions : $x = $object->getProperty(); empty($x)

PHP 5.5 : foreach loops now support non-scalar keys. I need to find the Iterator and make sure it returns array. 
// loading (on process a file, then pour everything in the file). 

Attention : Use may be used to change method visibility. Report this and also note this better in the analzyer.
Add report on aliases changing the visibility.

Find similar files
Spot common libraries...

Finish ConstantConditions 

Expose a list of difference between 2 versions of an application (API changed? existence, signature, impacted functions.)
List of impacted methods (calling, data is changed for the original method to )

Spot multiple aliases with the same names (compile but won't run)

Functions / methods may be a tube (mixing arguments) or changing some state.

// Useless code ?  (THen make this more complexe, with variable written 1, read 1, further apart.
        $info = $this->data->getInfo();
        $renderer->render($output, $info);

in CHeck for Unused private properties, removed properties used as append[] or objects (methods or properties)
Test for list to be in a namespace (\list may fail). Check for other functions that actually lead to a functioncall.

Some methods are meant to return nothing : construct/destruct, some of the magic methods, test/setup/teardown in phpunit...
Functions that return nothing needs to have special things in them : global, ini_set, ...

$x->property but property is not defined and (class) $x is defined with __get() or __set();

Spot properties that will be handled by __get et __set()
Spot methods that are not compatible with typehint

Add a way to configure the analyzer at file level (PHP DOC), or an external list (analyzer.ignore + others)

Variable used once : Ignore arguments if func_get_args is used.
Never used properties : check for classes below!
Never used properties : if (in_array($key, self::$_allowableAttributes[$tag])) { ($_allowableAttributes!!

Find nested incompatible conditions like this : (Also over multiples functions calls...)
if ($destination > 0) { 
        if ($destination == 0) {

$a['b'] = 3;  print "$a[b]\n"; : b is not a constant! 

Validate magic methods arguments in the definition

Add support for PHP 7 and for multiple PHP installation (and for missing PHP installs)
Merge all PHP versions into one table + 1 colon of selection

project_init store the initial URL in config.ini (git, or download or else)
project_init works with only URL (guess some names)

$fp = fopen('scripts/categories.md', 'r');   while (!feof($fp)) { (No check! This will go on if file doesn't exists...)
// usage of ressource without checking it really

Remove the 2 mysql databases and merge into one only.  (why not merge into one Sqlite? )

Add link to clearPHP in the docs. 

Make projectsize report non-bin/files'ed project 
make projectsize update vcs
make projectsize collect size in sqlite (not in mysql) and list of project + origin (for export )

Check for the exact count of nodes and relations at the end (compare g.V.count() with the count of useful nodes and relations. Add stats about index and their amounts).

In this folder, this and that is always the same. Why not in this one? (extensions, use, methods, )

List checks for data consistancy : 
+ php_functions list (is is all the other *.ini ? Same for interface, constant, trait, etc.)
+ aliases extensions?
+ Reference in function call ? 
+ Obsolete liste ? 
+ extensions in appinfo ? 

Finish overloaded for property/methods

testBySecond : testMethods are not used (neither setUp nor tearDown)

directInjection : Ignore 'secure' functions such as htmlentities, intval, isset

List tainted variables ($x = $_POST..) (the variables that may be reached in with tainted values).

die or throw ? May be die is useless and should be down by throwning all the time and adding an exception handler to stop the script. 

        if (isSet($httpVars["file"])) {
            $parts = parse_url($httpVars["file"]);
            $getPath = $parts["path"];
            $basename = basename($getPath);
        }
        if (isSet($httpVars["dlfile"])) {
            $dlFile = $streamData["protocol"]."://".$repository->getId().AJXP_Utils::decodeSecureMagic($httpVars["dlfile"]);
            $realFile = file_get_contents($dlFile);
            if(empty($realFile)) throw new Exception("cannot find file $dlFile for download");
            $parts = parse_url($realFile);
            $getPath = $parts["path"];
            $basename = basename($getPath);
        }
        basename may end up not initialized with any kind of value...
        
Methods returns various type (null, array, boolean...)

Accept scripts that throw warnings but still compile.

Clean bin and script folders

Validate that all files in a project are useful (check for classes + autoload, includes, mentions of scripts in open_files, etc..)
Make a tree of that 

Check speed for one file processing

Loop optimisation : anything in the loop that may be done outside? 

SPot : files direct access protection (defined('_JEXEC') or die('Restricted access') }
Spot useless of them

Complete the list of directive in Content/Directives
Add a list of directive spotted in the code

Finishes the following standard extensions : 
interbase
dotnet
xdiff

Check on reference returning functions (they should be called with reference).

Link referenced variables together

Check on reference returning functions : are they well used received? 

Evaluate the % of dynamic code in the code (% of tokens? Of variables? )

Check that returning function are actually used. 

Fatal error: Cannot increment/decrement overloaded objects nor string offsets in /Users/famille/Desktop/analyze/scripts/spelling on line 48
Can we detect that? 

Find uninitialised variables (read first, then written (or not))

Add support for traits when searching for properties/methods/constants….

Remove required vendor when installing with composer (no need to download everything...)

move all logs to be written directly in the project/<project>/log folder (no concurrency pb)

Constant with only one value (For constant conditions...)

Mark autoload sequences (so as to set them aside for the next rules. Also, make a list of dependencies as a reference list (autoload -> spotted/ignored. Config and mentionned in report).

Finish the 'superglobal propagation'

Spot twin lines ($x++; $x++; ...)

Add a 'config.ini' class, that will create and check the config.ini files.

Spot undefined properties (used with $this, but not in the PPP of the class nor its parents)

Error messages like mysqli_error (or pg_error(), etc) are PHP incoming (should be treated like that)

Finish DefinedProperties 

Spot magic properties in parents or traits

Spot traits and have them linked to class, not inside code. 
Structure better classes (outgoing links to methods, ppp, constants, etc. No in a Sequence but keep the ranking...)

Constant condition (PHPci : IS_WIN, while (fgets($sock)) { /**/ } )

remove usage of argv and replace with Config

Make various stats (deep level, switch w/o default, single or double quotes, etc...). This will help running (or not) some analyzers. 

Check the league of extraordinary packages

Enhanced Punit (for unit tests)

FuelPHP : 
Views are included; most properties are dynamical (defined in an array), framework is left out (many missing functions)

Test are TRUE (except for empty()). Otherwise, it just gets confusing. (An exception would be using ! empty(), as testing for false here is generally more intuitive.)

Add in the http://codex.wordpress.org/WordPress_Coding_Standards

Spot similar arrays (with the same values) and mention them.

separate Project name from its folder

Remove S_ARRAY indexing (keepIndexed should be good)

Warning
Internally, PHP strings are byte arrays. As a result, accessing or modifying a string using array brackets is not multi-byte safe, and should only be done with strings that are in a single-byte encoding such as ISO-8859-1.

Detect over-used functions (same variable get the same function called several time)

What size of code do I need to turn it into a functioncall ? 

Mark functions as idempotent (f(f(n)) == f(n))

Suggest constant by locating identical strings/numbers in special places ( case, comparisons...) Is it faster? Can it be made faster by using constants?

Separate 'files' with the official test and a script for short-tags, and the other compilation files.

automatically exclude files with NEXT at the end of the tokenizer (separate script for cleaning).

Add a readability test for PHP code (http://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests#cite_note-10, http://en.wikipedia.org/wiki/Automated_Readability_Index)

remove all usage of the common log folder

Top 5 des analyzeurs lents

Check that === null can be removed with a default object 
Tag strings as SQL (by regex, by usage)
List migration from PHP 5.2

in project, make the main process wait for the first // one to finish. This is not needed for longer projects, but for short ones.

Une global qui est utilisée dans une fonction pourrait être une static.

http://stackoverflow.com/questions/6913312/integer-is-not-being-shown-as-die-argument
Die/Exit won't display integers as argument

Add severity check in analyzer.php

magic number
constant interface
definition only
deep defintions

super global don't need to be called globals, but other PHP variables, Yes.

Spot that classes in a folder all extends one class above, and then, alert if some classes is not extending

Spot repeated code in a class (make this a property cache? ) 

Spot useless inclusions (include_once...)

Ternary is not protecting $_GET[]

Spot languages files (files with arrays of values) and ignore them by default (speed up the process, no much interest in those structures).
Suggest exporting large arrays 

Defined Properties should be used at least in the class itself

Support file extensions (and absence).
add a detector for file extensions (using grep? ) 

Remove the PPP from the index and give them another Atom (visibility)

Unused use : inside a class, they are traits. 
Double use : use with the current namespace ? 
Check for unused Traits (extension or use somewhere).

Change representation of Property, constant, methods, use in a class (remove ELEMENT, make it some other link to reduce long sequence scan)

add support for composer (avoid some undefined classes, interfaces, suggest to put them in the composer.json, spot unused classes, etc.)

call_user_func doesn't propage references 
References are contagious ? 

Spot PHP code in comments (separate script)

Add analyzer that will search for a list of specific structures 

Restore the old inventories ? 

Spelling in structures names (interfaces, classes....)

Spot if use script and / or web (or else ? ) 

in compatibility, list for specific values in $_SERVER, list of extension (windows / unix) 

Check that () are spoted as parenthesis for return, include, exit, die..., not as arguments

if ($a = new ()) // constant condition si à gauche, c'est une constante. 

case/default using ;

Arguments extending another parent shouldn't get typehint .

$value is spotted as a used once value (exclude blin variable?)
        foreach($this->project_config as &$value) {
            if (is_array($value) && empty($value[0])) {
                unset($value[0]);
            }
        }
        unset($value);

Spot equivalent concat (concat that are build different ways but are actually the name : 'a'.$a == "a$a";

Never Used Properties : Check for static too! 

Ignore auto-reference in arrayPreprocess
            $row['code'] = $this->escapeString($row['code']);

Compilation : Take into account configured version before reporting incompatible files (backward is not a pb)

List error messages from the sources ? 
(Translation, Explanation... Github document!)

Report a count : total count and count by analyzer (in a database for later merge?)

Make a script to check for tabs, end of file, end of line, UTF8 compatibility, spaces at the end of the line

Should have a parenthesis for readability
		$this->checkMethod($methodName)->testMethods[$methodName]['ignore'] = $boolean == true;

Switch with constant : in switch of in the case. 
		switch (true)
		{
			case $parameter->isArray():
				return 'array ';

			case method_exists($parameter, 'isCallable') && $parameter->isCallable():
				return 'callable ';

					->hasMessage(sprintf($generator->getLocale()->_('%s has size %d, expected size %d'), $asserter, sizeof($this), 0))

Spot auto-call of the application (curl or file_get_contents to localhost or else)

ArgumentNoComma : Never happens

Favoring PHP over SQL : move some calculations in the database. Spot loops after a load in the database ? 

Check for interfaces and Traits and their respective extensions

Inconsistent conditions
    if (fullcode.token == 'T_STRING') {
        isDefault = true;
        if (fullcode.token == 'T_NS_SEPARATOR') {

Support for class_alias
 list class_aliases created 
  
Spot Origin of values if they can be tracked back f('a'); f($a) { b($a); } b($c) { useful_function($c); }

add support for wincache + mention in portability (windows only) pcntl (Linux only) posix
no-windows : fam, ev, spplus, msession, pcntl, pfpro, mcve, 

Portability : (Note that DIRECTORY_SEPARATOR is still useful for things like explode-ing a path that the system gave you. Thanks to Shadowfiend for pointing this out.)

Spot alias to classes
    return \Hoa\Core\Consistency::from($namespace);

Spot classes of empty methods (surely something weird)

create_function => replace with Closures

List the return values for the PHP interfaces (if needed) so we can update the list of function that don't return;

Spot ob_* sequences 

Make an entry point with interfaces : Database, file systeme, shell, shmop, sockets, mail, ...

Signal double quote strings that may be reduced because of less escaping

echo 'foo: ' . $x+1 . ' bar'; (ordre de priorité voir aussi */% and suggest adding () )

Also, usage of global and attempts à detecting global and their usage count (variables only once used will be removed)

unserialize is unsecure

Propriété/methods/constants filles utilisées par les parents.

Propriété dont la visibilité pourrait être durcie

Property overloading only works in object context. These magic methods will not be triggered in static context. Therefore these methods should not be declared static. As of PHP 5.3.0, a warning is issued if one of the magic overloading methods is declared static.

Note:
The return value of __set() is ignored because of the way PHP processes the assignment operator. Similarly, __get() is never called when chaining assignments together like this:
 $a = $obj->b = 8; 
 
Add a script to remove an update an analyzer cleanly

Glob : 
Note: This function isn't available on some systems (e.g. old Sun OS).
Note: The GLOB_BRACE flag is not available on some non GNU systems, like Solaris.

Spot common arrays / string / values that are identical accross the files : they should be constanted.

Check if a functioncall returns the compatible type for a nested functioncall

More Report.php to ../

Spot structures that will change in PHP 7 (see nick)

$host = strlen($host) > 0 ? $host : htmlentities($host);

// spot getId() as double call on same value (needs to know if method is determinist)
    $x = $v[0]->getId();
    $V[$x] =  $v[0]->getProperties();
    
    if (isset($V[$x]['root'])) {
        $root = $v[0]->getId();
    }

For backward compatibility reasons, array_key_exists() will also return TRUE if key is a property defined within an object given as array. This behaviour should not be relied upon, and care should be taken to ensure that array is an array.
To check whether a property exists in an object, use property_exists().

UselessOverridingMethodSniff.php (test on parent but on any grand-parents too :)

Function whose result must be captured (assignation or expression)

Spot using the persistent connexions (still possible?)

Should use transport rather than specific extension (bzip2, zip, zlib...).
Spot transport, protocols, etc. used in the code 

Warning
If your application does not catch the exception thrown from the PDO constructor, the default action taken by the zend engine is to terminate the script and display a back trace. This back trace will likely reveal the full database connection details, including the username and password. It is your responsibility to catch this exception, either explicitly (via a catch statement) or implicitly via set_exception_handler().

Use Object notation if possible (xmlwriter_open_memory => XMLWriter::open_memory)

Remove Parenthesis in Ifthen

Simplify functions with static/global

spot echo that is not on usual structure (stats ? )

Consommation de mémoire : différent suivant l'accès à la propriété statique? 

Spot method/functions used once only.

Add a rule to spot missing ; in legal situations (before a ?> or endif)

Multiple definitions in a file (class + function + interface ...)

list() only works on numerical arrays and assumes the numerical indices start at 0. (Then it generates errors, that may be muted with @).

Spot deep string expressions (BAD BAD BAD )

call_user_func with function that has references in the args

Duplicate calls : check that the whole call is used, not just the beginning of a fluent call.
// also avoir variables local to a loop

Always test index in arrays BEFORE (if (!isset($array['index'])) ) and not ($array['index'] == null)

Spot property that are accessed via an accessor but is internal to the object : suggest speed up by going to the property.

Extract analyzer from Gremlin Query Builder, so as to be able to measure size of the query, and collect dependencies automatically. 

make some analyzers //

Spot the slowest analyzer automatically

There are some tokens which still have quite a lot of links to check when we near the end of the tokenizer call : check the cleaning 

Let's move Typehint to some other way (5s + each round is too much)

474946383961 => used to determine dimensions without getimagesize. (and not download the whole doc). 
=> amke this a rule ? 
=> update the inventory of special numbers / strings 

Mention PHP naming conventions.

http://www.javaworld.com/article/2077500/testing-debugging/java-tip-134--when-catching-exceptions--don-t-cast-your-net-too-wide.html

Spot coocurrences in Analyzer (create an alias for variable/array, use the alias for functions...)

Foreach with reference not modified : CHeck that the target method has reference too.

How to handle structures that are ignored ? We miss definitions. 

also, ignore classic octals and report special ones as possibly errnoneous

Spot PHP_INT_MAX as a value, et suggest a replacement with an actual constant.

Collect int/string/real/others for magic number / strings 
(spot common strings? )

Exclure les PHP_Frameworks_, atoum, simpletest as tests

Spot toctou (fallacies like : if (file_exists()) unlink (File may be removed between)

Build a database of invariant : things that are expected as logical (if (is_array($a)) => next($a) !== null;

// nested loops needs to have reference
        foreach($ini as $key => &$lists) {
            foreach($lists as $id => &$function) {

// Check that callable are arrays of 2 elements, not more (and not index...)

Find long list and compare with a dictionary (see continent?)

Avoid using regular expressions to validate email addresses. 

comparing objects ? http://php.net/manual/en/language.oop5.object-comparison.php

UwF: Field only ever set to null (UWF_NULL_FIELD) Property never used ? 
UwF: Unwritten field (UWF_UNWRITTEN_FIELD)

Function would like constants, not literals.

setlocale is bad on windows (see doc) Warning
The locale information is maintained per process, not per thread. If you are running PHP on a multithreaded server API like IIS or Apache on Windows, you may experience sudden changes in locale settings while a script is running, though the script itself never called setlocale(). This happens due to other scripts running in different threads of the same process at the same time, changing the process-wide locale using setlocale().

spot situations where code may be mistaken with the IDE ($x = 'a '.' b'; (=> 'a  b' and not "a '.' b")

wouldblock in flock
The optional third argument is set to 1 if the lock would block (EWOULDBLOCK errno condition). (not supported on Windows)

Spot arguments with a limited list of values (in_array or switch or direct comparisons)

Add a check for php native functions (from data/*.ini to be into methods analyzers)

No hardcoded URLS.

https://www.checkmarx.com/technology/vulnerability-coverage/
security : owasp

Detect circular references and suggest 'gc.disable' them (possible?)

Establish a tree-structure for methods, so as to differentiate branches inside the code 

Be able to consult a Packagist database to make sure constants are there (or not). Will depends on versions, package name, classes names (separate process, based on composer.json)

Spot properties that are in the parents/traits too. 

/* useless unset : array containing objects
        foreach (self::$instances as $instance) {
            if ($instance) unset($instance);
        }
*/

// written only variable : Not for dynamic variables
// used once only variable : Not for dynamic variables

//    protected $arguments = ''; NOT a variable in a trait (actually, property)

// property unused : check for traits too

// property undefined : check in traits AND hierarchy

// spot methods that are actually overwritting one in the parents, and then ignore the unused arguments

// manage USE in trait so as to be ignored (linked directly to the trait). 
// same for namespaces
// same for classes

//Lurker\Event\FilesystemEvent Check in the composer file  (load the packagist in the base.
// base should have namespaces, versions, 

// list of special classes and files
// robofile.php => Robo => task automation (like phing, bldr, etc.)
// phpunit_framework_extension => phpunit

// unused methods : methods in traits => check in used methods (is the trait used too ? )
// used/unsued traits

// DynamicParams : use may be a trait => appears in USE inside a class. 

Inconsistent encoding : collect a wide collection of encoding usage (encode, decode) and check for inconsistencies

instanceof should apply to arguments or incoming values, not locally created one (factory?)

Detect environnement (production, test, dev...)

Spot large arrays (in traductions?) and see how they are passed around (the less the better).

avoid finding duplicate calls that are inside closures 

Move property initialization to property definition, not construct ? 

Synchronmize google code, and source forge for clear PHP (and others).

In stats, export the count of every index avaible (how many staticmethodcall, new, functioncall, etc...)

Spot really complex code (if (array_filter($array, function() {})) {} : (Closure shouldn't be in the if).

Add a way to load several files within a folder (using configuration?)

Goto in switch or loop is disallowed, unless it is in the same context (jumping into a loop is not possible)

Dans les array, signaler des valeurs qui sont en doubles (disons que c'est rare).

check 'association' and 'in_for' realy usage.

See if one can turn all those string into constant and make it a dev/prod config option (prod, const=>number for speed up).

Spot literals used in functioncall, and compare them (f('yes'), f('yes'), f('maybe') <= may be isstrage)

Move more code in classes out from Task/Load

Attention to constant/functions that may be defined in another inclusion (with another class), and such, not available to all namespace (who's doing that?)

check the impact of too many extensions in terms of time.
(suggest dropping some extensions, and even not-compiling them, compared to a default installation).

Stop analysing code at __halt_compiler

Spot entry point in the application and outgoing points.

Suggest positive conditions when there is a if/else

neo4j 2.2.0ME 4 : ditch batch-import
    No support for Gremlin
    Tutorial for neo4j-import
    migration to Cypher ? 

Remove die, print_r, var_dump.
    Vérifier que les tests fonctionnent avec phar
    
Packaging PHar
    Que faire des scripts de tests? 
    add more checks on incoming values (white lists)
    Check phar::mount with SQLITE ? 
    Adds an error handler
    add devoops to phar
    Finish devoops
        Change the icons in the menu
        Check speed of production (40s?)
        Log speed of production in database 
        Review infobox
        check SEO
        check internal links 
        Add link back to dashboard from within detailled page.
        Add link back to exakat.com in index.html
    
this variable is always concatenated (added, multiplicated, process) with this function. This could be merged.

DeadCode after such structures :  
        if (!$res) { 
            return null;
        } else {
            return $res->fetchArray(SQLITE3_ASSOC)[0];
        }

Restaure project tracking in projectAdmins

Create a notion of closed-circuit variables (internally created and consumed. Spot point where they collide with arguments)
Is it possible to tag variables as internal, closed-circuited, incoming, outgoing ? 

Add a check that validate the status of a project

Add a status that tells if a project is being run

Adds progress information in datastore

Suggest moving out of rand to mt_rand.
Suggest avoiding time for initialising srand()

Add a check in appinfo (appinfo -> theme and theme -> appinfo). Shoudl go to dasboard.

is allow_url_fopen useful ? 

Break down 'Directive' into smaller class (or export to some external file for translation...)
Use manual documentation
Spot missing extensions (for upgrade)

add checks in robo for cleaning the code before putting it in phar : php lint, ini lint, sqlite integrity check, etc.

magick number : suggest replacement of literal if a constant is available.
Ignore magic number if defined in a constant (define or const)

Refresh the demo online (prelude, volcano, hypewall)

Collect API for wordpress, spot unknown one (all prefixed with wp_?)

Integrate https://wiki.php.net/rfc/remove_deprecated_functionality_in_php7 into Compatiblity 7

add link to github files (in the code)
Find a way to open a local file (how?)

Inconsistent Expression : If than doesn't do the same in both branches. This way, If may inherit some of the characteristics of its elements (like finish script).
What about unbalanced if ? 
Switch may have this too

add pandoc to the doctor

Detect external binary in shell_exec calls 

Publish some of the databases in a separate github folder

Automate the sending of report online with Robo (in project admin)
(remove the Chrome check)

Add a task to clean a project (remove all)

error reporting with integer? 
error_reporting(0)

Wordpress : 
detect wordpress plugin (global, api call)
Note that it's best to use the appropriate API functions when available, instead of modifying globals directly.
List of global variable (don't break a sweat)
Constant list : http://wpengineer.com/2382/wordpress-constants-overview/ (or extracted from history)
Accessing other globals besides the ones listed below is not recommended.

Property definedAbove
Property definedBelow

Add security checks in Config

Variables written twice in a row without being read (case of overloading?)

Find a way to update Report with correct format in Robofile

public method/property that is not used outside the class
check for protected
check for methods
check for var and forgotten public

Report lines and files that have actually accumulated several notices
Have a presentation by files (errors found in a file), helping for spotting files to fix

restore dashboard
Include test for composers (do we have all needed component?)

Remove dependencies
PHPLOC
batch-import

Get slow analyzers
Review ->raw() calls and create separate internal fixes
Produce stats for disk/memory recommendations

to submit null + typehint, one need to put null as default values.

Interrupt script with exception earlier (no repeated errors)

Avoid printing non-compilable files

faire une documentation d'utilisation

Clean the option reading from exakat

arguments are not always indexed (Can I remove this?)

Gerer le cas ou le code est vide (pas d'erreur inutiles)

Spot undefined exception in Catch (like undefined)

interfaces : they should be used in Typehint to be useful .

Value is the same (saved as property but passed also as argument. $this->x = $a; $this->f($a); arguments == property)

Client is always called without any configuration!

Suggest making arguments properties when they are relayed from method to method

Suggest visibility dpending on usage (not public, not private?)

Could Implements I : list classes that may 'implements' an available interface but are not explicitely

Tokeninzer
"$a = &$b + $c" and "$a = $b + $c" are totally different. #php (Code that don't work as expected)

implemented interface methods must be public

toString throws exception, but it is intercepted.
__tostring()-throws-exception : Wrong link building

Start internationalization (report, error messages, configuration)

Report old Composer recommendations
Make a simple report with our recommendations and their composer file to download.

Check for default version from config.php

Check for default values in applications too

Injection!
@mail(\GOTEO_FAIL_MAIL, 'Comunicacion online', 'Este GET<pre>' . print_r($_GET, 1) . '</pre> y este POST:<pre>' . print_r($_POST, 1) . '</pre>');

Mark functioncall as methods for easier scanning

Should always used prepared statement

instanceof is 10x faster than get_class()

Method has conditions or not 

Make a database of namespaces, variables, properties, etc. and see how much a script is original.
Bring a note of originality (this has never been seen anwwhere...)
Spot emails in the code.

array are not allowed in class constants (< 5.6)
Spot properties that are array and never changed => constants?

Support des fichiers au noms chinois?

Never modified property => const ? 

Remove 'Description' in the doc
Check with Christophe for keywords from each page. 
Add top 5 files
Make a link to clearPHP when it is available.

Minify jss and css in devoops (It fails)

Remove X when something is not found (add some other icon if the doc isn't run).
Suggest simplification : if ($a == 2) { $b = true; } else { $b = false;}


Restore batch-import in installation (check for imported values-type (boolean) or else)
Check for index in cleandb
check that db is well restarted after cleandb


// Ne pas se faire manger par un bug php qui accepte ?GLOBALS[truc]=toto
if (isset($_REQUEST['GLOBALS'])) die();
Spot overridden variables ? 

Stop project task if any error is dected
Avoid using shell_exec in tasks (use the other tasks!)

print_r as argument needs 2nd argument 
                die(print_r(array_keys(static::$fp_rels))."\nNO $label\n");

Retirer les print dans Tasks (et dans le reste du code)
Gérer les interruptions de processus au niveau de project
Revoir Project pour le configurer
Corriger la page d'accueil pour un projet non-default (SPIP)
Externaliser les rapports
Eviter shell_exec dans Project (appels de classes)
Vider tower 
CSV avec les rapports de spip

Rapport de cohérence (always do the same ... )
Exporter uniquement les définitions des règles (référence documentaire)
Make themas configurable in config.ini

Move support for spip out of tasks
Detect early and remove non-composer dependencies (pclzip, krumo, jpgraph, fpdf, phpexcel...)

add other composer classes (silex, ..) Automate the process
definitions only
Check undefined parent (when the parent is a composer component )
method that MUST be overloaded (abstract) may be empty

incompilable files (set a limit in the config file)

composer class may be array interface ($this is an array)

What is a method/function that MUST return (no interactions with $this, 

arbre de dépendences entre les plug-ins via les _dist

_dist mais pas le charger_fonction 

GPR : 
pas de REQUEST 

config/ecran_securite.php => ignorer GPR detecitons
_request
Exclure PCLZIP

Check that phploc is executable in doctor
Faire une tache 'check project' pour savoir ou est le project
Faire une tache 'progress' pour savoir ou est le project / le system 
Check that compilation tables are all available or not.
robo : deploy to release, spartacus

tri dans analyzer result count

methods vides sur-classées -> OK

detect tests and exclude them from analyze

unmodified reference argument : useless, PHP does it for us. Unrelayed arguments!! 

special cases for parent, self, static and $this when checking for methods arguments.

special case for methods defined only once
spot easy cases for variable's object class

Build the classes tree (dot) with Use, extends, implements, staticcalls... 

Mark files as non-PHP (but with .php extensions, and vice versa).
Make such a list of file at Files time. 

Start a dictionary of concepts used in exakat. 
List of characters that may be bad for PHP ? 15, 39, 92
Unexpected character in input:  '' (ASCII= -31 -19 -21 -92 -39 -30 -2 -12 -11 -22 -8 -4 -7 -27 -26 -20 -18 -25 -16 


Avoid searching (always know what to search... avoir substr(function0, -1), => but foreach(positions))

Validate JSON (resource_usage.json, check internal consistencies, check all spellings, duplicates)
Add 'string encoding' to report.

magicnumber : report names of all structures.

iconv_set_encoding : INI SET!

Spot old code in the codebase? 
Code older than (xxx months) may be omitted.

URL_Fopen : how to detect its usage/availability ?
elseif empty is not empty (it means the test intercepts some situation)
empty else or empty final elseif is bad.

$$foo['bar']['baz'] or Foo::$bar['baz'](). 
Currently, a statement like global $$foo->bar; is allowed in PHP. For PHP 7 it has to be rewritten as global ${$foo->bar};.

add checks in robo for pictures (they should be smallest), report (they should be tidy).

Find a way to add 'association' for foreach/for/if/ifelse, etc. They are not compulsory but should be used when building instructions to reduce checking. 

Review : https://wiki.php.net/rfc#php_70 for PHP 7 compatibility.

& new x() => fatal error.

Unmodified Referenced Argument

Spot IsRead/IsModified Static property
Spot IsRead/IsModified Static array 

Check that analyze has a project (compulsory option)
Restore log2csv exports

Separate Ppp (public, Private or property or var) from definitions for properties.

Doctor won't find PHP on the first try.

Refine build_root to avoid associations { and : 

Nested alternative (difficult to read)

Check for and the last one (tbd)

Clone doesn't need parenthesis !! 
Finish pageone (export in JSON)

Faire une tache de tests du Tokenizer seul pour vérifier plus de projets rapidement
Exporter stats avant/apres tokenizer dans datastore (et non plus dans log)

Mix of alternative / normal PHP (alternative for template?)

Access to $_POST must be done with isset first

String that are assigned then checked must be a constant
Spot mixed alternative/normal PHP syntax

if ($str=='') // uh-oh! What if FALSE or the integer 0 is passed as an argument? 

Simplify the class block for faster moving inside the structure (METHOD, CONSTANT, PROPERTY, no more BLOCK)
Create a 'global' class to hold the const ?

Multiple declared interface

static outside a class/interface is useless

Prepare the database of methods (Wrong Number of Arguments, Methods).

echo "{$_COOKIE['incoming']}"; : fullcode doesn't render the brackets

Make test for fullcoding.

Compared to integer ? to wrong type ? 
    if (!file_exists(dirname($file).'/code/.git/') == 2) { 

Add Analyzer\Callable in Unused classes
support de call_method()

Handling PHP7 incompatibilities, such as : $foo()['bar'](); Do need a directive (can't have them both. Can detect them?)

no-raw-exceptions
no-curly-array

project has a 'third-party' folder ?

Instanceof with unused classes is dead code
Missing Semicolons before ?>

/e for preg_match
don't use / as delimiter for regular expressions
empty/isset and type test 
phpcheatsheets.com


Escape late

hook filter : they should return always
theme has a theme checker.

WP : for debug situations		if ( $debug_display && ( $debug || $wpseo_debug ) ) {
		if ( ( defined( 'WP_DEBUG' ) && WP_DEBUG === true ) ) {

			$xdebug = ( extension_loaded( 'xdebug' ) ? true : false );

Locate heavy functions (big-O style, or simple counts)
no-missing-; ? 

Remove all usage of g.V 

PHP 7 : remove ereg
PHP 7 : alternative tags
multiple default cases in switch
uniform variable syntax
exceptiosn (catch...)
spaceship ? (what could be replaced by it?)
unicode escape syntax (what could benefit?)
?? operator (what could benefit)
group use
generator return value
delegation
scalar typehint

avoid session fixation : ext/session must use session_regenerate_id(true); somewhere (

List differences between constants, variables, classes (const, method, property) interfaces and trait between versions (exclude the one from extensions, make a standard distribution).

List some function for exclusion for security measures if they are not used in the code. 

check the to_var (index with _) and remove them. 

uniqid : not for crypto either.

foo() && bar() ; // that is not useless, as the function call may change some state.
                 // It means we need to mark the function as context marking or not. 

MacBookPro:analyze famille$ php exakat project -p -v concrete5
PHP Notice:  Undefined offset: 3 in /Users/famille/Desktop/analyze/library/Config.php on line 219

make Task reentrant (one may re-run a task even if it was already run and interrupted).

Collect a list of classes by project, 

Make 'project' different than the one in production

.final.log should be empty always (or may be have a 'Done' result).




2015-06-18 12:47 GMT+02:00 Flavien Metivier <flavien@quality-code.fr>:
Analyse :
- pouvoir ignorer des fichiers dans le config.ini
2 directives;
ignore_dirs[] = 
Répete ignore_dirs[] aussi souvent que nécessaire.
La chaîne que tu indiques sera alors recherchée dans le path complet : si elle est trouvée, le path sera ignoré.

ignore_dirs[] = a   (ignore tous les dossiers et sous-dossiers qui contiennent a)
ignore_dirs[] = /vendor/  ignore des noms de dossier complet
ignore_dirs[] = vendor  ignore 'vendor' dans le path, aka, /vendor/  /a/b/c/vendor/e/f/  /__vendors__/ etc...

Tu peux alors mettre des path complets par sécurité.
Comme c'est comparé avec le path, tu peux ignorer des fichiers. /ignore/this/file.php


- ignorer les fichier liés au framework. par exemple pour sf2 :
   * /app/SymfonyRequirements.php
   * /app/cache
   * /app/check.php
   * /web/app_dev.php
   * /app/autoload.php
Noté. 
A court terme, il faut que tu ignores cela dans le config.ini ci-dessus. 
  
- si il y a un composer.json faire un composer install pour éviter la non résolution de classe et ne pas analyser le répertoire vendor
J'ai vu la liste de tes composants. j'ai une bibliothèque de ces composants dans exakat, qui évite le chargement de composer : il doit manquer pas mal des composants que tu utilises. 

- paramètre de méthode mis en used only once mais indispensable car définit par l'interface
interface i { function a($param) }
class x implements i { function a($param) { return true; }} 
Ici, unused param est normal, car imposé par l'interface ou la classe abstraite.

- a priori l'analyse ne fonctionne pas si l'on remplace le répertoire code par un lien symbolique
Je vais voir ca.
 
- avoir une progress bar de l'analyse
Yep :) 

- lorsque l'on relance une analyse il est souvent nécessaire de relancer neo4j
Oui. En fait, c'est souvent lui qui finit par se bloquer (mémoire, longue requêtes... etc.). 

Interface :
- Avoir directement la liste anomalies au niveau d'analysis pour chaque type et pouvoir les trier par sévérité
Oui, il manque le tri surtout.  
 
- scroll du menu et du contenu indépendant
- historique des analyses
- trier par défaut les listes par file et line
- dans detailled indiquer la sévérité de l'anomalie
Noté.  
 
- accès à Function subscripting, old style => [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "<unknown>"]
 Doit y avoir un pb de lien ou de fichier. Le rapport est entièrement en local. 

- certains listing ne s'affiche pas correctement (seulement la colonne Code ou Code et file)
C'est pas le code qui est très large, et dépasse la largeur de l'écran ? 
